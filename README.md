# Торговый ассистент для QUIK

Этот проект представляет собой систему автоматической торговли, интегрированную с торговой платформой QUIK. Ассистент анализирует рыночные данные и автоматически отправляет заявки на покупку и продажу ценных бумаг.

## Основные возможности

- Автоматическое выставление заявок в зависимости от времени суток
- Поддержка нескольких брокеров (Финам, ВТБ, Промсвязьбанк, Ростсельмашбанк)
- Работа с различными типами ценных бумаг (акции, облигации, иностранные бумаги)
- Логирование всех операций
- Обработка сделок и автоматическое закрытие позиций

## Описание системы

Торговый ассистент состоит из нескольких компонентов, реализованных в виде Lua-скриптов, которые взаимодействуют с системой QUIK и обрабатывают торговые данные из различных источников.

## Основные файлы

- **Assistant.lua** — основной скрипт ассистента, управляющий логикой работы всей системы
- **StartEngine.lua** — движок запуска системы
- **SubmittingOrders.lua** — модуль отправки торговых поручений
- **TableConstructor.lua** — конструктор таблиц для хранения данных
- **TableOrders.lua** — работа с таблицами заказов
- **TableSetting.lua** — настройки системы
- **TradeSave.lua** — сохранение информации о сделках
- **QuikFunction.lua** — функции взаимодействия с QUIK
- **FileFunction.lua** — функции работы с файлами
- **Setting.lua** — настройки системы
- **Order.lua** — определение структуры заказов
- **csv.lua** — работа с CSV-файлами
- **json.lua** — работа с JSON-файлами
- **log.lua** — система логирования
- **enum.lua** — перечисления

## Архитектура системы

Проект реализован в виде набора Lua-модулей, каждый из которых отвечает за определенную функциональность:
- **Assistant.lua**: точка входа и обработчик событий QUIK
- **StartEngine.lua**: основной цикл и обработка транзакций
- **SubmittingOrders.lua**: логика выставления заявок
- **Order.lua**: модель заявки и методы работы с ней
- **Setting.lua**: настройки для разных брокеров
- **log.lua**: система логирования операций

## Данные

Директория `/Data` содержит различные файлы с торговыми данными:

- **FINAM_*.csv** — данные от брокера Финам (заявки на покупку/продажу)
- **PSB_*.csv** — данные от брокера Промсвязьбанк
- **VTB_*.csv** — данные от брокера ВТБ
- **TEST_*.csv** — тестовые данные
- **MyTrades.csv** — история собственных сделок
- **trades*.csv** — файлы с историей торгов
- **Procent.txt** — файл с процентными значениями

## Настройка и запуск

Для запуска системы необходимо:

1. Убедиться, что QUIK установлен и настроен
2. Загрузить скрипты в терминал QUIK
3. Настроить пути к файлам данных в соответствии с вашей структурой
4. Запустить основной скрипт Assistant.lua

## Конфигурация

Система поддерживает настройки для различных брокеров, которые автоматически определяются по ID пользователя. Поддерживаются следующие брокеры:
- Финам (Finam)
- ВТБ (VTB)
- Промсвязьбанк (PSB)
- Ростсельмашбанк (RSHB)
- Тестовый режим (TEST)

Каждый брокер имеет свои параметры:
- Код клиента
- Код счета
- Ограничения по объему заявок
- Ограничения по доходности

## Особенности работы

Система анализирует данные из внешних файлов, сравнивает цены и объемы, принимает решения о выставлении заявок и взаимодействует с торговым сервером через API QUIK.

## Безопасность

Перед использованием рекомендуется протестировать систему в тестовой среде. Автор не несет ответственности за возможные финансовые потери при использовании данного программного обеспечения.